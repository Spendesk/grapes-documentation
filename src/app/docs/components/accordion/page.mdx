import { Preview } from "@/lib/preview/preview";
import { DemoAccordion, DemoOpen, DemoControlledAccordion } from "./demo";

## Basic usage

:::alert{title="Content Overflow"}
The AccordionItem component benefits from an animation effect when it is revealed or concealed. This animation requires the use of an overflow property to ensure the content appears and disappears smoothly.

As a result, components such as `Popover`, `Select`, and `DropdownMenu` are **not compatible** with the AccordionItem component, as they cannot properly overflow the AccordionItem's boundaries.

It is recommended to avoid using these components within an AccordionItem to ensure proper functionality.

However, if you must use these components within an AccordionItem, you can use the `noAnimation` prop. This prop will disable the animation, thereby eliminating the need for the overflow property.
:::

The Accordion is highly customizable and has few styles from the start.

<Preview className="body-m">
  <DemoAccordion />
</Preview>

```tsx sandbox
const accordionItems = [
  "Invite team members",
  "Make a first payment",
  "Order physical cards",
];

const Demo = () => {
  return (
    <Accordion>
      {accordionItems.map((accordionItem) => (
        <AccordionItem
          key={accordionItem}
          renderHeader={() => <div>{accordionItem}</div>}
        >
          <div className="p-24 pt-8 text-primary">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla nec
            lectus sed sem porttitor viverra. Vestibulum magna leo.
          </div>
        </AccordionItem>
      ))}
    </Accordion>
  );
};
```

## Default expanded item

The `open` prop lets you select which item should be expanded.

Only one item can be expanded at the same time.
If multiple `AccordionItem` have the prop `open` set to `true`, the last one will be open.

<Preview className="body-m">
  <DemoOpen />
</Preview>

```tsx sandbox
<Accordion className="w-full text-primary">
  <AccordionItem
    open // [!code highlight]
    renderHeader={() => "Invite team members"}
  >
    <div className="p-24 pt-8">
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla nec lectus
      sed sem porttitor viverra. Vestibulum magna leo.
    </div>
  </AccordionItem>
  <AccordionItem renderHeader={() => "Make a first payment"}>
    <div className="p-24 pt-8">
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla nec lectus
      sed sem porttitor viverra. Vestibulum magna leo.
    </div>
  </AccordionItem>
</Accordion>
```

## Open / Close accordion

To control an `AccordionItem`, use the `useState` hook and set the `open` prop to the desired state.

<Preview className="body-m">
  <DemoControlledAccordion />
</Preview>

```tsx sandbox
function Demo() {
  const [indexOpen, setIndexOpen] = useState("close"); // [!code highlight]

  return (
    <>
      <Button
        variant="primaryBrand"
        text="Open accordion"
        onClick={() => setIndexOpen("open")}
      />
      <Button
        variant="primaryBrand"
        text="Close accordion"
        onClick={() => setIndexOpen("close")}
      />
      <Accordion className="w-full overflow-hidden">
        <AccordionItem
          open={"open" === indexOpen} // [!code highlight]
          renderHeader={() => "Invite team members"}
        >
          <div className="p-24 pt-8 text-primary">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla nec
            lectus sed sem porttitor viverra. Vestibulum magna leo.
          </div>
        </AccordionItem>
      </Accordion>
    </>
  );
}
```
