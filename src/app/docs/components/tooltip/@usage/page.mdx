import { Button, Callout, Tooltip } from "@dev-spendesk/grapes";
import { Preview } from "@/components/preview/preview";

import { VisibleOnClick } from "./visible-on-click";

## Basic usage

<Preview>
  <Tooltip
    content="This is some useful information in a tooltip"
    placement="top"
    triggerAsChild
  >
    <Button variant="primary" isDisabled text="Top tooltip" />
  </Tooltip>
</Preview>

```tsx
<Tooltip content="This is some useful information in a tooltip" triggerAsChild>
  <Button variant="primary" isDisabled text="Top tooltip" />
</Tooltip>
```

## Placement

Use the `placement` prop to specify where the tooltip should be positioned.

<Preview>
  <Tooltip
    content="This is some useful information in a tooltip"
    placement="top"
  >
    <Button variant="primary" isDisabled text="Top tooltip" />
  </Tooltip>
  <Tooltip
    content="This is some useful information in a tooltip"
    placement="bottom"
  >
    <Button variant="primary" isDisabled text="Bottom tooltip" />
  </Tooltip>
  <Tooltip
    content="This is some useful information in a tooltip"
    placement="left"
  >
    <Button variant="primary" isDisabled text="Left tooltip" />
  </Tooltip>
  <Tooltip
    content="This is some useful information in a tooltip"
    placement="right"
  >
    <Button variant="primary" isDisabled text="Right tooltip" />
  </Tooltip>
</Preview>

```tsx
<>
  <Tooltip
    content="This is some useful information in a tooltip"
    placement="top"
    triggerAsChild
  >
    <Button variant="primary" isDisabled text="Top tooltip" />
  </Tooltip>
  <Tooltip
    content="This is some useful information in a tooltip"
    placement="bottom"
    triggerAsChild
  >
    <Button variant="primary" isDisabled text="Bottom tooltip" />
  </Tooltip>
  <Tooltip
    content="This is some useful information in a tooltip"
    placement="left"
    triggerAsChild
  >
    <Button variant="primary" isDisabled text="Left tooltip" />
  </Tooltip>
  <Tooltip
    content="This is some useful information in a tooltip"
    placement="right"
    triggerAsChild
  >
    <Button variant="primary" isDisabled text="Right tooltip" />
  </Tooltip>
</>
```

## Disabled

If the `isDisabled` prop is set to `true`, the tooltip will never appear.

<Preview>
  <Tooltip content="This is some useful information in a tooltip" isDisabled>
    <Button variant="primary" isDisabled text="Tooltip" />
  </Tooltip>
</Preview>

```tsx
<Tooltip content="This is some useful information in a tooltip" isDisabled>
  <Button variant="primary" isDisabled text="Tooltip" />
</Tooltip>
```

## Controlled Tooltip

The tooltip can be controlled using the `isOpen` prop.

<VisibleOnClick />

```tsx
const Demo = () => {
  const [isVisible, setIsVisible] = useState(false);

  return (
    <Tooltip content="Copied" isOpen={isVisible} triggerAsChild>
      <Button
        variant="primary"
        text="Click to copy"
        onClick={() => {
          setIsVisible(true);
          setTimeout(() => {
            setIsVisible(false);
          }, 2000);
        }}
      />
    </Tooltip>
  );
};
```

## triggerAsChild and forwardRef

To use any component as the trigger (the component around which the tooltip will go), a `div` is added around it.
To avoid having this div around the trigger (this can be useful for ellipsis for example), you can use the `triggerAsChild` prop to do so. This will remove the div but you will need to add `forwardRef` to your custom component.

At least the Grapes `Button`, `Icon`, `IconButton`, and `HighlightIcon` components have a forwardRef, and this will be added to more components in the future.

<Callout variant="alert" title="Disabled elements">
  The `triggerAsChild` prop will not work with disabled elements. Since disabled
  elements do not send events, it is for now necessary to have the surrounding
  div to add a tooltip around it.
</Callout>
