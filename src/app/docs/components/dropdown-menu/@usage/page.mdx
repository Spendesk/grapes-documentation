import { Preview } from "@/components/preview/preview";
import { DemoDropdownMenu, DemoDropdownMenuCheckboxes } from "./demo";

## Basic usage

<Preview>
  <DemoDropdownMenu />
</Preview>

```tsx
const costCenters = [
  { key: "marketing", label: "Marketing" },
  ...
];

export function MyDropdownMenu() {
  const [selectedOption, setSelectedOption] = useState<string | undefined>();

  return (
    <DropdownMenu
      options={costCenters}
      renderButton={(getToggleButtonProps) => (
        <Button
          {...getToggleButtonProps()}
          variant="ghost"
          text="Cost centers"
        />
      )}
      renderOption={(option) => (
        <DropdownItem
          label={option.label}
          isSelected={selectedOption === option.key}
        />
      )}
      onSelect={(option) => {
        if (option) {
          setSelectedOption(option.key);
        }
      }}
    />
  );
}
```

## Placement

The `placement` prop lets you decide where the dropdown content should appear.

<Preview>
  <DemoDropdownMenu placement="bottom-start" />
  <DemoDropdownMenu placement="bottom-end" />
  <DemoDropdownMenu placement="top-start" />
  <DemoDropdownMenu placement="top-end" />
</Preview>

```tsx
<>
  <DropdownMenu placement="bottom-start" {...otherProps} />
  <DropdownMenu placement="bottom-end" {...otherProps} />
  <DropdownMenu placement="top-start" {...otherProps} />
  <DropdownMenu placement="top-end" {...otherProps} />
</>
```

## Dropdown width

Setting a width and the button `fit` prop to `parent` will make the dropdown content fit the button's size.

<Preview>
  <DemoDropdownMenu fitToButton />
</Preview>

```tsx
<DropdownMenu
  renderButton={(getToggleButtonProps) => (
    <div className="w-[300px]">
      <Button fit="parent" {...otherButtonProps} />
    </div>
  )}
  {...otherProps}
/>
```

## Keep open on select

The `keepOpenOnSelect` prop makes the dropdown content stay visible when options are selected. This can be useful for filters.

<Preview>
  <DemoDropdownMenuCheckboxes />
</Preview>

```tsx
const [selectedOptions, setSelectedOptions] = useState<string[] | undefined>(
  undefined
);

return (
  <DropdownMenu
    keepOpenOnSelect
    renderButton={(getToggleButtonProps) => (
      <Button {...getToggleButtonProps()} variant="ghost" text="Cost centers" />
    )}
    options={costCenters}
    onSelect={(option) => {
      if (selectedOptions?.includes(option.key)) {
        const filteredSelectedOptions = selectedOptions?.filter(
          (s) => s !== option.key
        );
        setSelectedOptions(
          filteredSelectedOptions.length ? filteredSelectedOptions : undefined
        );
      } else {
        setSelectedOptions([...(selectedOptions ?? []), option.key]);
      }
    }}
    renderOption={(option) => {
      const isSelected = selectedOptions
        ? selectedOptions.includes(option.key)
        : false;
      return (
        <DropdownItem
          key={option.key}
          label={option.label}
          isSelected={isSelected}
          isHighlighted={isSelected}
          prefix={<CheckboxInput isChecked={isSelected} onChange={() => {}} />}
        />
      );
    }}
  />
);
```
