import { ogRoot, ogTitle } from "./style";
import fs from "node:fs/promises";

type OgImageProps = {
  title: string;
};

export default function OgImage({ title }: OgImageProps) {
  return (
    <div style={ogRoot}>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="500"
        height="136"
        fill="none"
      >
        <g stroke="#191B1B" stroke-width="4">
          <path
            fill="#9BDAA7"
            d="M3.512 50.657c8.463-10.894 30.363-26.085 50.252.3-5.401 7.92-23.012 18.948-50.252-.3Z"
          />
          <path
            fill="#9BDAA7"
            d="M48.171 3.613c12.5 5.83 32.18 23.807 10.889 49.073-8.921-3.504-23.588-18.225-10.889-49.073Z"
          />
          <path
            fill="#fff"
            d="m64.948 66.334.004.007a3.13 3.13 0 1 0 5.299-3.33l-.007-.012-.015-.023-.05-.08a52.312 52.312 0 0 0-.892-1.327 85.77 85.77 0 0 0-2.747-3.718c-2.42-3.109-6.022-7.36-10.784-11.977-9.511-9.223-23.736-19.99-42.486-25.957a3.129 3.129 0 1 0-1.897 5.965C28.933 31.47 42.348 41.591 51.4 50.368c4.52 4.383 7.93 8.41 10.202 11.329a79.402 79.402 0 0 1 2.545 3.444 45.704 45.704 0 0 1 .768 1.142l.033.05Z"
          />
          <path
            fill="#7136ED"
            d="M91.021 59.8c-10.826-3.94-16.408-15.915-12.467-26.745 3.94-10.829 15.91-16.413 26.737-12.471 10.826 3.941 16.408 15.916 12.467 26.745-3.94 10.83-15.911 16.413-26.737 12.471Zm-58.019 46.367c-10.826-3.942-16.408-15.916-12.467-26.746 3.94-10.829 15.91-16.412 26.737-12.47 10.826 3.94 16.408 15.915 12.467 26.744-3.94 10.829-15.91 16.413-26.737 12.472Z"
          />
          <path
            fill="#7136ED"
            d="M70.23 71.185C59.402 67.243 53.82 55.269 57.761 44.44c3.94-10.83 15.91-16.413 26.737-12.472 10.826 3.942 16.408 15.916 12.467 26.745-3.94 10.83-15.91 16.413-26.737 12.472Z"
          />
          <path
            fill="#7136ED"
            d="M46.61 90.342C35.782 86.401 30.2 74.427 34.141 63.597c3.94-10.829 15.91-16.413 26.737-12.471 10.826 3.941 16.408 15.916 12.467 26.745-3.94 10.83-15.91 16.413-26.737 12.471Zm53.023-8.452c-10.826-3.942-16.408-15.916-12.468-26.745 3.94-10.83 15.911-16.413 26.737-12.472 10.826 3.942 16.408 15.916 12.468 26.745-3.941 10.83-15.911 16.413-26.737 12.472Z"
          />
          <path
            fill="#7136ED"
            d="M52.75 119.225c-10.827-3.942-16.409-15.916-12.468-26.745 3.94-10.83 15.91-16.413 26.737-12.472 10.826 3.942 16.408 15.916 12.467 26.745-3.94 10.83-15.91 16.413-26.737 12.472Z"
          />
          <path
            fill="#7136ED"
            d="M76.013 101.047c-10.826-3.941-16.408-15.915-12.467-26.745 3.94-10.829 15.91-16.413 26.736-12.471 10.827 3.941 16.409 15.916 12.468 26.745-3.94 10.83-15.91 16.413-26.737 12.471Z"
          />
          <path
            fill="#7136ED"
            d="M105.416 111.752c-10.826-3.941-16.408-15.915-12.468-26.745 3.94-10.829 15.911-16.413 26.737-12.471 10.826 3.942 16.408 15.916 12.468 26.745-3.941 10.829-15.911 16.413-26.737 12.471Z"
          />
          <path
            fill="#7136ED"
            d="M82.153 129.93c-10.826-3.942-16.408-15.916-12.468-26.745 3.94-10.83 15.91-16.413 26.737-12.472 10.826 3.942 16.408 15.916 12.468 26.745-3.941 10.83-15.911 16.413-26.737 12.472Z"
          />
          <path
            fill="#7136ED"
            d="M111.556 140.635c-10.826-3.942-16.408-15.916-12.467-26.745 3.94-10.829 15.91-16.413 26.737-12.472 10.826 3.942 16.408 15.916 12.467 26.746-3.94 10.829-15.911 16.412-26.737 12.471Z"
          />
        </g>
        <path
          fill="#191B1B"
          d="M209.664 116.896c-19.04 0-36.848-13.44-36.848-40.096s17.92-40.096 38.416-40.096c18.704 0 32.592 10.752 34.272 26.32H232.96c-1.68-9.632-10.08-16.016-21.84-16.016-15.12 0-26.432 10.752-26.432 29.792 0 19.488 11.312 29.792 26.544 29.792 12.656 0 22.736-7.28 22.736-16.352 0-3.808-1.792-5.824-5.376-5.824H211.68v-9.408h20.496c7.952 0 12.992 4.928 12.992 12.992v28h-10.64v-11.088c-3.696 6.384-12.768 11.984-24.864 11.984Zm49.413-.896V59.552h10.864v10.864c2.576-7.504 7.056-10.864 15.008-10.864h6.832v9.408h-8.176c-10.304 0-13.664 9.184-13.664 21.504V116h-10.864Zm56.279.896c-11.536 0-19.264-6.944-19.264-17.024 0-10.864 8.736-18.032 21.952-18.032h11.872c2.576 0 3.808-.896 3.808-2.912 0-6.832-5.04-11.536-13.664-11.536-7.952 0-13.552 4.928-13.888 10.64h-10.08c.896-11.088 10.864-19.376 24.304-19.376 14.56 0 24.08 8.4 24.08 20.944V116h-10.752v-9.296c-2.8 6.16-9.856 10.192-18.368 10.192Zm2.128-8.624c10.192 0 16.24-6.608 16.24-17.024V90.24h-14.56c-7.392 0-12.208 3.472-12.208 9.408 0 5.152 4.144 8.624 10.528 8.624Zm42.109 30.576V59.552h10.864v8.288c3.472-5.6 10.528-9.184 18.032-9.184 17.024 0 26.768 12.432 26.768 29.12 0 16.688-9.744 29.12-26.656 29.12-7.616 0-14.784-3.696-18.144-9.296v31.248h-10.864Zm27.328-31.472c10.416 0 17.36-7.84 17.36-19.6 0-11.76-6.944-19.6-17.36-19.6s-17.36 7.84-17.36 19.6c0 11.76 6.944 19.6 17.36 19.6Zm65.119 9.52c-17.472 0-28.224-13.776-28.224-29.456 0-15.792 9.856-28.784 27.216-28.784s26.656 12.432 26.656 26.768c0 1.456-.112 3.36-.224 4.368h-43.008c.896 10.528 7.84 17.808 17.584 17.808 8.288 0 13.664-3.584 15.232-9.968h10.864c-1.904 11.648-12.096 19.264-26.096 19.264Zm-17.248-35.504h31.92c-.672-8.624-6.384-14-15.68-14-8.736 0-14.56 4.816-16.24 14Zm74.096 35.504c-13.664 0-21.84-7.056-22.736-19.264h9.968c.56 6.496 5.376 10.416 12.656 10.416 6.72 0 11.088-3.248 11.088-8.288 0-13.776-32.256-1.792-32.256-24.304 0-9.968 8.4-16.8 20.16-16.8 13.104 0 21.056 6.608 21.84 17.584h-9.968c-.56-5.488-5.264-9.072-11.76-9.072-5.6 0-10.192 2.8-10.192 7.84 0 13.328 32.368.672 32.368 24.192 0 10.864-8.064 17.696-21.168 17.696Z"
        />
      </svg>

      <p style={ogTitle}>{title}</p>
    </div>
  );
}

export async function fetchFonts() {
  const urlInter = process.cwd() + "/public/Inter-Regular.ttf";

  // Set null as encoding to return a Buffer
  const bufferInter = await fs.readFile(urlInter, null);

  // Transform buffer to ArrayBuffer
  const ab = new Uint8Array(bufferInter).buffer;

  return [
    {
      name: "Inter",
      data: ab,
      style: "normal" as const,
      weight: 500 as const,
    },
  ];
}
