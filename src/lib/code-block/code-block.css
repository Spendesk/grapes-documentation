.docs-code {
  color-scheme: light;
  --grapes-color-background-hover: color-mix(
    in srgb,
    var(--grapes-color-background-complementary-default) 70%,
    var(--grapes-color-background-primary-default)
  );
  --_code-padding: var(--grapes-unit-16);
  position: relative;
  margin-block: var(--grapes-unit-16);
  max-width: var(--docs-width);
  line-height: 1.3;

  .docs-cta-copy {
    position: absolute;
    top: 0px;
    right: 0px;
  }

  .docs-cta-open {
    position: absolute;
    top: 0;
    right: var(--grapes-unit-40);
  }

  .docs-pre {
    padding: var(--_code-padding);
    border-radius: var(--grapes-border-radius-8);
    overflow-x: auto;
    font: var(--grapes-body-m);
    font-family: var(--docs-ff-mono);
  }

  .highlighted {
    display: inline-block;
    width: calc(100% + 2 * var(--_code-padding));
    margin-inline: calc(-1 * var(--_code-padding));
    padding-inline: var(--_code-padding);
    background: color-mix(
      in srgb,
      var(--grapes-color-background-primary-default) 10%,
      transparent
    );
  }

  .diff {
    margin: 0 calc(-1 * var(--_code-padding));
    padding: 0 var(--_code-padding);
    width: calc(100% + 2 * var(--_code-padding));
    display: inline-block;

    &::before {
      position: absolute;
      left: var(--grapes-unit-4);
      color: var(--grapes-color-content-complementary);
    }
  }

  .remove {
    opacity: 0.85;
    background-color: color-mix(
      in srgb,
      var(--grapes-color-background-primary-alert-default) 70%,
      transparent
    );
    &::before {
      content: "-";
    }
  }
  .add {
    background-color: color-mix(
      in srgb,
      var(--grapes-color-background-primary-success-default) 70%,
      transparent
    );
    &::before {
      content: "+";
    }
  }
}

.docs-preview + .docs-code {
  margin-block-start: 0;

  .docs-pre {
    border-radius: 0 0 var(--grapes-border-radius-8)
      var(--grapes-border-radius-8);
  }
}
