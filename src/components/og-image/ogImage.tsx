import { ogRoot, ogContainer, ogTitle, ogCategory } from "./style";
import fs from "node:fs/promises";

type OgImageProps = {
  title: string;
  subtitle: string;
};

export default function OgImage({ title, subtitle }: OgImageProps) {
  return (
    <div style={ogRoot}>
      <svg
        width="300"
        viewBox="0 0 391 119"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M30.5888 45.5899C35.4082 39.3884 47.8785 30.7404 59.2041 45.7602C56.1287 50.269 46.1002 56.5472 30.5888 45.5899Z"
          fill="#41D9CC"
          stroke="#040222"
          strokeWidth="2.26"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
        <path
          d="M56.0196 18.8091C63.1379 22.128 74.3437 32.3617 62.2201 46.7451C57.1401 44.75 48.788 36.3696 56.0196 18.8091Z"
          fill="#41D9CC"
          stroke="#040222"
          strokeWidth="2.26"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
        <path
          d="M65.5729 54.5141L65.5756 54.5184C66.0991 55.3511 67.199 55.603 68.0321 55.0798C68.8655 54.5565 69.1161 53.4555 68.5928 52.6221L68.5891 52.6161L68.5805 52.6026L68.5515 52.5573C68.5268 52.5189 68.4915 52.4645 68.4456 52.395C68.3539 52.2558 68.2197 52.0559 68.0433 51.802C67.6906 51.2944 67.1687 50.5704 66.4794 49.6851C65.1015 47.9154 63.0503 45.4953 60.3386 42.8667C54.9225 37.6164 46.8225 31.4868 36.1453 28.0902C35.2076 27.7919 34.2055 28.3102 33.9072 29.248C33.6089 30.1858 34.1272 31.1878 35.065 31.4861C45.064 34.667 52.7036 40.4287 57.8582 45.4254C60.4319 47.9203 62.3737 50.2126 63.6676 51.8744C64.3142 52.7048 64.7978 53.3764 65.1167 53.8354C65.2761 54.0648 65.3942 54.2409 65.4708 54.3571C65.5091 54.4151 65.537 54.4581 65.5545 54.4853L65.5729 54.5141Z"
          fill="white"
          stroke="#040222"
          strokeWidth="2.26"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
        <circle
          r="11.8788"
          transform="matrix(-0.939693 -0.34202 -0.34202 0.939693 84.4832 39.6325)"
          fill="#5D21D2"
          stroke="#040222"
          strokeWidth="2.26"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
        <circle
          r="11.8788"
          transform="matrix(-0.939693 -0.34202 -0.34202 0.939693 51.4445 66.0275)"
          fill="#5D21D2"
          stroke="#040222"
          strokeWidth="2.26"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
        <circle
          r="11.8788"
          transform="matrix(-0.939693 -0.34202 -0.34202 0.939693 72.6432 46.1132)"
          fill="#5D21D2"
          stroke="#040222"
          strokeWidth="2.26"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
        <circle
          r="11.8788"
          transform="matrix(-0.939693 -0.34202 -0.34202 0.939693 59.193 57.0192)"
          fill="#5D21D2"
          stroke="#040222"
          strokeWidth="2.26"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
        <circle
          r="11.8788"
          transform="matrix(-0.939693 -0.34202 -0.34202 0.939693 89.3868 52.2074)"
          fill="#5D21D2"
          stroke="#040222"
          strokeWidth="2.26"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
        <circle
          r="11.8788"
          transform="matrix(-0.939693 -0.34202 -0.34202 0.939693 62.6894 73.4611)"
          fill="#5D21D2"
          stroke="#040222"
          strokeWidth="2.26"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
        <circle
          r="11.8788"
          transform="matrix(-0.939693 -0.34202 -0.34202 0.939693 75.9369 63.1134)"
          fill="#5D21D2"
          stroke="#040222"
          strokeWidth="2.26"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
        <circle
          r="11.8788"
          transform="matrix(-0.939693 -0.34202 -0.34202 0.939693 92.68 69.2075)"
          fill="#5D21D2"
          stroke="#040222"
          strokeWidth="2.26"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
        <circle
          r="11.8788"
          transform="matrix(-0.939693 -0.34202 -0.34202 0.939693 79.433 79.5553)"
          fill="#5D21D2"
          stroke="#040222"
          strokeWidth="2.26"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
        <circle
          r="11.8788"
          transform="matrix(-0.939693 -0.34202 -0.34202 0.939693 96.1767 85.6495)"
          fill="#5D21D2"
          stroke="#040222"
          strokeWidth="2.26"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
        <path
          d="M160.65 33.008C147.846 33.008 139.464 44.36 139.464 57.032C139.464 69.704 146.526 80.792 159.792 80.792C166.062 80.792 170.088 77.888 171.804 75.248H171.936L173.784 80H178.998V56.504H162.894V63.632H170.88V67.988C169.428 70.628 165.336 72.872 160.716 72.872C152.202 72.872 147.912 65.744 147.912 56.9C147.912 48.254 152.796 40.664 160.65 40.664C166.392 40.664 169.692 44.69 171.936 50.366H172.332L178.206 44.294C175.83 39.08 170.22 33.008 160.65 33.008ZM201.088 42.248C197.722 42.248 194.818 44.162 193.366 47.924H193.168L192.574 43.04H185.908V80H193.828V60.2C193.828 54.128 195.874 50.3 200.164 50.3C202.408 50.3 204.454 51.488 205.51 52.742H205.906L207.292 44.822C206.17 43.436 203.794 42.248 201.088 42.248ZM225.218 42.248C218.618 42.248 213.404 45.416 210.368 49.772L214.46 56.306H214.856C217.166 52.346 220.796 49.31 225.152 49.31C229.574 49.31 231.554 51.158 231.554 53.666C231.554 55.976 230.234 57.164 221.522 58.946C213.008 60.794 210.104 64.82 210.104 70.562C210.104 76.766 213.8 80.792 221.126 80.792C226.208 80.792 229.904 78.614 232.016 75.116H232.214L233.072 80H239.342V55.316C239.342 47.066 233.666 42.248 225.218 42.248ZM231.554 61.718V66.932C231.554 70.826 227 73.73 222.38 73.73C219.542 73.73 217.76 72.344 217.76 69.968C217.76 67.79 219.014 66.14 223.832 65.018C228.584 63.896 230.696 63.104 231.422 61.718H231.554ZM265.616 42.248C260.072 42.248 256.376 44.954 254.726 47.924H254.528L253.934 43.04H247.268V92.21H255.188V75.842H255.452C257.366 78.614 260.996 80.792 265.616 80.792C275.648 80.792 281.39 72.608 281.39 61.652C281.39 50.63 274.79 42.248 265.616 42.248ZM264.296 49.508C270.368 49.508 273.47 54.92 273.47 61.652C273.47 68.45 270.302 73.4 264.362 73.4C258.62 73.4 254.858 68.846 254.858 61.784C254.858 54.524 258.29 49.508 264.296 49.508ZM303.182 42.248C293.678 42.248 286.022 50.102 286.022 61.586C286.022 73.004 292.754 80.792 303.776 80.792C311.036 80.792 316.382 77.096 318.296 74.324L314.732 67.262H314.336C312.62 69.968 308.66 73.4 303.776 73.4C298.1 73.4 294.272 69.308 294.14 63.896H320.012C320.012 63.896 320.078 62.312 320.078 61.19C320.078 49.904 312.752 42.248 303.182 42.248ZM303.182 49.508C308.33 49.508 311.498 53.402 311.828 57.626H294.338C294.932 53.798 297.902 49.508 303.182 49.508ZM338.884 42.248C330.502 42.248 325.75 47.462 325.75 53.204C325.75 59.078 329.512 62.312 337.696 64.358C346.078 66.536 347.068 67.592 347.068 69.704C347.068 72.014 345.154 73.466 340.468 73.466C335.65 73.466 331.36 70.364 328.654 66.932H328.258L324.694 73.73C327.4 77.096 333.076 80.792 340.93 80.792C348.85 80.792 354.856 76.568 354.856 69.968C354.856 63.17 350.566 60.53 341.854 58.352C333.868 56.306 333.406 55.118 333.406 53.27C333.406 51.29 335.254 49.31 338.884 49.31C343.042 49.31 347.134 52.082 349.774 55.712H350.17L353.668 49.112C351.754 46.604 346.54 42.248 338.884 42.248Z"
          fill="#040222"
        />
      </svg>
      <div style={ogContainer}>
        <h2 style={ogCategory}>{subtitle}</h2>
        <h1 style={ogTitle}>{title}</h1>
      </div>
    </div>
  );
}

export async function fetchFonts() {
  const url = process.cwd() + "/public/Inter-Bold.ttf";

  // Set null as encoding to return a Buffer
  const buffer = await fs.readFile(url, null);

  // Transform buffer to ArrayBuffer
  const ab = new Uint8Array(buffer).buffer;

  return [
    {
      name: "Inter",
      data: ab,
      style: "normal" as const,
      weight: 500 as const,
    },
  ];
}
